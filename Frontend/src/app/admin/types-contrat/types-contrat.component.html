<div class="types-page">
  <!-- Header -->
  <div class="page-header">
    <div class="header-left">
      <h1>Types de Contrat</h1>
      <p>Gestion des types de contrats disponibles</p>
    </div>
    <button class="btn btn-primary" (click)="openModal()">
      <span class="material-icons">add</span>
      Nouveau Type
    </button>
  </div>

  <!-- Stats -->
  <div class="stats-row">
    <div class="stat-card">
      <span class="stat-icon material-icons">category</span>
      <div class="stat-content">
        <span class="stat-value">{{ types().length }}</span>
        <span class="stat-label">Types de contrat</span>
      </div>
    </div>
  </div>

  <!-- Table -->
  <div class="table-card">
    <div class="card-header">
      <h2>Liste des Types</h2>
    </div>
    <table class="data-table">
      <thead>
        <tr>
          <th>Nom du type</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (type of types(); track type._id) {
          <tr>
            <td>
              <span class="type-name">{{ type.contract_type_name }}</span>
            </td>
            <td>
              <div class="actions">
                <button class="action-btn" title="Modifier" (click)="openModal(type)">
                  <span class="material-icons">edit</span>
                </button>
                <button class="action-btn delete" title="Supprimer" (click)="deleteType(type)">
                  <span class="material-icons">delete</span>
                </button>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>

    @if (types().length === 0) {
      <div class="empty-state">
        <span class="material-icons" style="font-size: 3rem; color: #ccc">category</span>
        <p>Aucun type de contrat enregistre</p>
        <button class="btn btn-primary" (click)="openModal()">
          Ajouter un type
        </button>
      </div>
    }
  </div>
</div>

<!-- Modal -->
@if (showModal()) {
  <div class="modal-overlay" (click)="closeModal()">
    <div class="modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ editingType() ? 'Modifier le Type' : 'Nouveau Type de Contrat' }}</h2>
        <button class="close-btn" (click)="closeModal()">
          <span class="material-icons">close</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>Nom du type de contrat</label>
          <input type="text" [(ngModel)]="formName" placeholder="Ex: Location commerciale, Bail professionnel..."
                 (keyup.enter)="save()">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" (click)="closeModal()">Annuler</button>
        <button class="btn btn-primary" (click)="save()" [disabled]="!formName.trim()">
          <span class="material-icons">{{ editingType() ? 'save' : 'add' }}</span>
          {{ editingType() ? 'Enregistrer' : 'Creer' }}
        </button>
      </div>
    </div>
  </div>
}
